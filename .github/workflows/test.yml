on:
  push:
    branches:
      - main
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: create a temporary artifact downloads folder
        run: mkdir downloads
      
      - name: list of files
        run: ls -l downloads
      
      - name: add artifacts to publish to the temp folder
        run: |
          cd downloads
          curl -sL "https://expo.dev/artifacts/eas/eepvn5XnaAAWKz6o3yuauU.apk" > "tiendaticket".apk
          cd ..
      
      - name: list of files
        run: ls -l downloads
      
      - name: Upload to blob storage
        uses: azure/CLI@v1
        with:
          inlineScript: |
              az storage blob upload --account-name applicationapkstorage --account-key GpKA4ycifBIcHnEzBf4UGAirJbwRxhe3/11w2TeyCiVeMVUYgioR15zphM64/3yTuU/gsKQpMz9G+AStL4fvQA== --container-name apk --file downloads/tiendaticket.apk --name tiendaticket.apk
